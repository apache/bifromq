host: 0.0.0.0 # bind to all available network interfaces
tcpPort: 1883
tlsPort: 1884
wsPort: 80
wssPort: 443
wsPath: /mqtt
tcpEnabled: true
tlsEnabled: false
wsEnabled: false
wssEnabled: false
connTimeoutSec: 20
maxConnPerSec: 5000
maxDisconnPerSec: 1000
maxMsgByteSize: 262144 # 256KB
maxResendTimes: 5
maxConnBandwidth: 5120000 # 512bps
defaultKeepAliveSec: 300
qos2ConfirmWindowSec: 5
authProviderFQN:
settingProviderFQN:
settingProviderProvideBufferSize: 8192
eventCollectorReportBufferSize: 2048
kvStoreBootstrap: true

agentHostConfig:
  env: test
  port: 8781
  seedEndpoints: 127.0.0.1:8781 # alive agentHost addresses in the cluster

distStoreClientConfig:
  execPipelinePerServer: 5
  queryPipelinePerServer: 5

inboxStoreClientConfig:
  execPipelinePerServer: 5
  queryPipelinePerServer: 5

retainStoreClientConfig:
  execPipelinePerServer: 5
  queryPipelinePerServer: 5

distWorkerConfig:
  dataEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 300
  walEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 3600
  balanceConfig:
    scheduleIntervalInMs: 5000
    balancers:
      - com.baidu.bifromq.dist.worker.balance.RecoveryBalancerFactory
      - com.baidu.bifromq.dist.worker.balance.ReplicaCntBalancerFactory

inboxStoreConfig:
  dataEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 300
    compactMinTombstoneKeys: 50000
  walEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 3600
  balanceConfig:
    scheduleIntervalInMs: 5000
    balancers:
      - com.baidu.bifromq.inbox.store.balance.RecoveryBalancerFactory
      - com.baidu.bifromq.inbox.store.balance.ReplicaCntBalancerFactory

retainStoreConfig:
  dataEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 300
    compactMinTombstoneKeys: 50000
  walEngineConfig:
    type: rocksdb
    dataPathRoot: data
    gcIntervalInSec: 3600
  balanceConfig:
    scheduleIntervalInMs: 5000
    balancers:
      - com.baidu.bifromq.retain.store.balance.RecoveryBalancerFactory
      - com.baidu.bifromq.retain.store.balance.ReplicaCntBalancerFactory
